(this["webpackJsonphabit-tracker"]=this["webpackJsonphabit-tracker"]||[]).push([[0],{166:function(e,t,a){},19:function(e){e.exports=JSON.parse('{"apiUrl":"https://www.pursharthvohra.com/api/","prodUrl":"https://www.pursharthvohra.com/api/","tokenKey":"habit_token"}')},294:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),s=a.n(c),i=(a(166),a(26)),o=a(20),l=a(8),u=a(30),b=a(7),j=function(e,t){var a=t.type,n=t.payload;switch(a){case"SET_HABIT":return Object(b.a)(Object(b.a)({},e),{},{habits:n});case"SET_CATEGORY":return Object(b.a)(Object(b.a)({},e),{},{category:n});case"SET_HABIT_NAME_LIST":return Object(b.a)(Object(b.a)({},e),{},{habitsNameList:n});case"SET_HABIT_RESTRUCTURE":return Object(b.a)(Object(b.a)({},e),{},{habitRestructure:n});case"SET_ERROR":return Object(b.a)(Object(b.a)({},e),{},{error:[].concat(Object(u.a)(e.error),[n])});case"SET_HABIT_STATUS":return Object(b.a)(Object(b.a)({},e),{},{habitStatus:Object.assign({},e.habitStatus,n)});case"SET_CURRENT_DATE":return Object(b.a)(Object(b.a)({},e),{},{currentDate:n});case"SET_WEEK_START_DATE":return Object(b.a)(Object(b.a)({},e),{},{weekStartDate:n});case"SET_WEEK_END_DATE":return Object(b.a)(Object(b.a)({},e),{},{weekEndDate:n});case"SET_TOKEN":return Object(b.a)(Object(b.a)({},e),{},{token:n});case"SET_USER_INFO":return Object(b.a)(Object(b.a)({},e),{},{userInfo:n});case"SET_IS_AUTHENTICATED":return Object(b.a)(Object(b.a)({},e),{},{isAuthenticated:n});case"SET_IS_LOADING":return Object(b.a)(Object(b.a)({},e),{},{isLoading:n});case"SET_CURRENT_WEEK_DATES":return Object(b.a)(Object(b.a)({},e),{},{currentWeekDates:n});default:return e}},d=a(11),p=a.n(d),O=a(41),h=a(18),x=a(328),m=a(329),f=a(56),v=a.n(f),y=a(19),g=a(140),S={setToken:function(e){var t=y.tokenKey;localStorage.setItem(t,e)},getToken:function(e){return localStorage.getItem(e)},removeToken:function(e){localStorage.removeItem(e)},getUserInfo:function(e){var t=this.getToken(e);return Object(g.a)(t)}},T=S;v.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||console.log("An unexpected error occurred , logging the error",e),Promise.reject(e)})),v.a.interceptors.request.use((function(e){var t=T.getToken(y.tokenKey);return e.headers.Authorization=t?"Bearer ".concat(t):null,e}),(function(e){return Promise.reject(e)}));var E={get:v.a.get,post:v.a.post,put:v.a.put,delete:v.a.delete};function k(){return(k=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.post(y.apiUrl+"saveHabit",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get(y.apiUrl+"getHabits");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.post(y.apiUrl+"updateHabit",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.post(y.apiUrl+"updateIsTracked",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D={saveHabit:function(e){return k.apply(this,arguments)},getHabits:function(){return _.apply(this,arguments)},updateHabitStatus:function(e){return w.apply(this,arguments)},updateIsTracked:function(e){return N.apply(this,arguments)}};function I(){return A.apply(this,arguments)}function A(){return(A=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getHabits();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return console.log(e),e.map((function(e){return e.habitName}),[])}function C(e){var t={},a=[];if(e&&"object"===typeof e){var n,r=Object(O.a)(e);try{for(r.s();!(n=r.n()).done;){var c=n.value;t.hasOwnProperty(c.category)||(a.push(c.category),t[c.category]=[]),t[c.category].push(c)}}catch(s){r.e(s)}finally{r.f()}}return Promise.resolve([t,a])}function H(){var e=new Date;return console.log(e),Promise.resolve(e)}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;console.log(e);var t=Object(x.a)(e);return console.log(t),t}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=Object(m.a)(e);return t}var K=a(2),W={habits:[],category:[],habitsNameList:[],habitRestructure:{},habitStatus:[],error:[],currentDate:new Date,weekStartDate:U()||new Date,weekEndDate:z()||new Date,token:"",isAuthenticated:!1,userInfo:{},isLoading:!0,currentWeekDates:[]},B=Object(n.createContext)(W),F=function(e){var t=e.children,a=Object(n.useReducer)(j,W),r=Object(l.a)(a,2),c=r[0],s=r[1];return Object(K.jsx)(B.Provider,{value:[c,s],children:t})},L=a(340),M=a(343),P=a(344),q=a(88),G=a(141),Y=a(342),J=a(349),V=a(336),Q=a(296),$=a(337),X=a(338),Z=a(330),ee=a(334),te=a(339),ae=a(335),ne=a(352),re=a(104),ce=a.n(re),se=function(e){var t=e.category,a=Object(n.useContext)(B),r=Object(l.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(null),o=Object(l.a)(i,2),u=o[0],b=o[1],j=Object(n.useState)(t),d=Object(l.a)(j,1)[0];Object(n.useEffect)((function(){b(c.habitRestructure)}),[c.habitRestructure]),Object(n.useEffect)((function(){c.habitRestructure[d].forEach((function(e){var t={},a=e.habitName;t[a]=[];for(var n=!1,r=function(r){var s=Object(G.a)(c.weekStartDate,r),i=Object(J.a)(s,"ddMMyyyy"),o=e.habitTrack.filter((function(e){return e.date===i}));o.length>0&&o[0].isComplete?t[a][r]=!0:t[a][r]=!1,6===r&&(n=!0)},i=0;i<=6;i++)r(i);n&&s({type:"SET_HABIT_STATUS",payload:t})}))}),[d,s,c.weekStartDate,c.habitRestructure]);var O=Object(n.useRef)(),x=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.updateHabitStatus(t);case 2:200===e.sent.status&&(alert("Habit Status updated"),O.current.focus());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e,t,a){var n={id:t._id,date:ce()(c.weekStartDate).add(a,"days").format("DDMMYYYY"),day:ce()(c.weekStartDate).add(a,"days").format("ddd"),isComplete:e.target.checked,inputData:null},r=t.habitName,i=c.habitStatus;if(i[r][a]=e.target.checked,s({type:"SET_HABIT_STATUS",payload:i}),"checkbox"!==t.inputType&&!0===e.target.checked){var o=prompt("Enter the  value for ".concat(t.habitName),"");null===o?alert("Please enter the value "):(n.inputData=o,x(n))}else x(n)};return Object(K.jsx)(K.Fragment,{children:u?u[d].map((function(e){return Object(K.jsxs)(Z.a,{children:[Object(K.jsx)(ee.a,{align:"center",children:e.habitName},e._id),Object(K.jsx)(ee.a,{align:"center",children:Object(K.jsx)(ne.a,{checked:c.habitStatus[e.habitName][0]||!1,index:0,id:e._id,onChange:function(t){return m(t,e,0)},ref:O,size:"small"})}),Object(K.jsx)(ee.a,{align:"center",children:Object(K.jsx)(ne.a,{checked:!!c.habitStatus&&c.habitStatus[e.habitName][1],index:1,id:e._id,onChange:function(t){return m(t,e,1)},ref:O,size:"small"})}),Object(K.jsx)(ee.a,{align:"center",children:Object(K.jsx)(ne.a,{checked:!!c.habitStatus&&c.habitStatus[e.habitName][2],index:2,id:e._id,onChange:function(t){return m(t,e,2)},ref:O,size:"small"})}),Object(K.jsx)(ee.a,{align:"center",children:Object(K.jsx)(ne.a,{checked:!!c.habitStatus&&c.habitStatus[e.habitName][3],index:3,id:e._id,onChange:function(t){return m(t,e,3)},ref:O,size:"small"})}),Object(K.jsx)(ee.a,{align:"center",children:Object(K.jsx)(ne.a,{checked:!!c.habitStatus&&c.habitStatus[e.habitName][4],index:4,id:e._id,onChange:function(t){return m(t,e,4)},ref:O,size:"small"})}),Object(K.jsx)(ee.a,{align:"center",children:Object(K.jsx)(ne.a,{checked:!!c.habitStatus&&c.habitStatus[e.habitName][5],index:5,id:e._id,onChange:function(t){return m(t,e,5)},ref:O,size:"small"})}),Object(K.jsx)(ee.a,{align:"center",children:Object(K.jsx)(ne.a,{checked:!!c.habitStatus&&c.habitStatus[e.habitName][6],index:6,id:e._id,onChange:function(t){return m(t,e,6)},ref:O,size:"small"})})]},e._id)})):Object(K.jsx)("div",{children:"You are no tracking any habits yet, please add habits and it will show here"})})},ie=Object(L.a)((function(e){return{root:{flexGrow:1},paper:{padding:"5px",textAlign:"center",color:"black"},table:{minWidth:350}}})),oe=function(){var e=Object(n.useContext)(B),t=Object(l.a)(e,2),a=t[0],r=t[1],c=ie(),s=Object(n.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1];return Object(n.useEffect)((function(){"{}"===JSON.stringify(a.habitRestructure)&&u(!0)}),[a.habitRestructure]),Object(n.useEffect)((function(){!function(){var e=Object(ae.a)({start:a.weekStartDate,end:a.weekEndDate}).map((function(e){return Object(J.a)(e,"dd")}));r({type:"SET_CURRENT_WEEK_DATES",payload:e})}()}),[a.weekStartDate,a.weekEndDate,r]),Object(K.jsx)("div",{className:c.root,children:Object(K.jsx)(V.a,{className:c.table,component:Q.a,children:Object(K.jsxs)($.a,{"aria-label":"simple table",padding:"none",size:"small",stickyHeader:!0,children:[Object(K.jsx)(X.a,{children:Object(K.jsxs)(Z.a,{children:[Object(K.jsx)(ee.a,{align:"center",children:"Habits "}),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e,t){return Object(K.jsx)(ee.a,{align:"center",children:"".concat(e," ").concat(a.currentWeekDates[t])})}))]})}),Object(K.jsx)(te.a,{children:a.habitRestructure&&!o?Object(K.jsx)(K.Fragment,{children:a.category?a.category.map((function(e,t){return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)(Z.a,{children:[Object(K.jsx)(ee.a,{children:Object(K.jsx)("strong",{children:e})}),Object(K.jsx)(ee.a,{}),Object(K.jsx)(ee.a,{}),Object(K.jsx)(ee.a,{}),Object(K.jsx)(ee.a,{}),Object(K.jsx)(ee.a,{}),Object(K.jsx)(ee.a,{}),Object(K.jsx)(ee.a,{})]},e),Object(K.jsx)(se,{category:e})]})})):Object(K.jsx)(Z.a,{children:"ss"})}):Object(K.jsx)(Z.a,{children:Object(K.jsxs)(ee.a,{align:"center",children:["Loading ...  "," "]})})})]})})})},le=a(351),ue=a(341),be=a(146),je=a.n(be);var de=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Boolean(a),s=c?"simple-popover":void 0;return Object(K.jsxs)("div",{children:[Object(K.jsx)(le.a,{id:s,open:c,anchorEl:a,onClose:function(){r(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(K.jsx)("div",{children:Object(K.jsxs)($.a,{children:[Object(K.jsx)(X.a,{children:Object(K.jsxs)(Z.a,{children:[Object(K.jsx)(ee.a,{align:"center",children:"Habits "}),Object(K.jsx)(ee.a,{align:"center",children:"Track Habit"})]})}),Object(K.jsx)(te.a,{})]})})}),Object(K.jsx)(ue.a,{"aria-describedby":s,size:"small",color:"primary",onClick:function(e){r(e.currentTarget)},children:Object(K.jsx)(je.a,{})})]})};function pe(){var e=Object(n.useContext)(B),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Oe(),i=Object(n.useState)(!1),o=Object(l.a)(i,2),u=o[0];o[1];Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){var t,a,n,r,s,i,o,u,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"SET_IS_LOADING",payload:!0}),e.next=3,I();case 3:return t=e.sent,c({type:"SET_HABIT",payload:t}),e.next=7,C(t);case 7:return a=e.sent,n=Object(l.a)(a,2),r=n[0],s=n[1],c({type:"SET_HABIT_RESTRUCTURE",payload:r}),c({type:"SET_CATEGORY",payload:s}),i=R(t),c({type:"SET_HABIT_NAME_LIST",payload:i}),e.next=17,H();case 17:return o=e.sent,c({type:"SET_CURRENT_DATE",payload:o}),e.next=21,U(new Date);case 21:return u=e.sent,e.next=24,z(new Date);case 24:b=e.sent,c({type:"SET_WEEK_START_DATE",payload:u}),c({type:"SET_WEEK_END_DATE",payload:b}),c({type:"SET_IS_LOADING",payload:!1});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]);var b=function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,s,i,o,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==t){e.next=11;break}return r=Object(G.a)(a.currentDate,n),c({type:"SET_CURRENT_DATE",payload:r}),e.next=5,U(r);case 5:return s=e.sent,e.next=8,z(r);case 8:i=e.sent,c({type:"SET_WEEK_END_DATE",payload:i}),c({type:"SET_WEEK_START_DATE",payload:s});case 11:if("sub"!==t){e.next=22;break}return o=Object(Y.a)(a.currentDate,n),c({type:"SET_CURRENT_DATE",payload:o}),e.next=16,U(o);case 16:return l=e.sent,e.next=19,z(o);case 19:u=e.sent,c({type:"SET_WEEK_START_DATE",payload:l}),c({type:"SET_WEEK_END_DATE",payload:u});case 22:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(K.jsxs)(r.a.Fragment,{children:[Object(K.jsx)("div",{style:{margin:"20px"},children:"".concat(Object(J.a)(a.weekStartDate,"dd MMMM")," to ").concat(Object(J.a)(a.weekEndDate,"dd MMMM"))}),Object(K.jsx)(M.a,{container:!0,className:s.root,spacing:2,children:Object(K.jsxs)(M.a,{item:!0,xs:12,children:[Object(K.jsxs)(M.a,{container:!0,justify:"center",children:[Object(K.jsx)(M.a,{item:!0,children:Object(K.jsx)(P.a,{style:{margin:"20px"},variant:"contained",color:"primary",onClick:function(){return b("sub",7)},children:"Prev"})}),Object(K.jsx)(M.a,{item:!0,children:Object(K.jsx)(P.a,{style:{margin:"20px"},disabled:u,variant:"contained",color:"primary",onClick:function(){return b("add",7)},children:"Next"})}),Object(K.jsx)(M.a,{xs:3,item:!0}),Object(K.jsx)(M.a,{item:!0,justify:"flex-end",children:Object(K.jsx)(de,{})})]}),Object(K.jsx)(M.a,{container:!0,justify:"center",children:a.isLoading?Object(K.jsx)("div",{style:{fontSize:"4vw"},children:"Loading Habits .... \ud83e\udd2a"}):Object(K.jsx)(oe,{})})]})})]})}console.log("************ In Home page Component ");var Oe=Object(L.a)({table:{minWidth:200,maxWidth:600,paddingLeft:10},checkbox:{color:q.a[400],"&$checked":{color:q.a[600]}},spinIt:{width:10,height:10}});function he(){return Object(K.jsx)("div",{children:Object(K.jsx)(oe,{})})}var xe=a(37),me=a(345),fe=a(346),ve=a(347),ye=a(350),ge=a(353),Se=a(32),Te=a(25),Ee=document.getElementById("modal"),ke=function(e){var t=e.children,a=Object(n.useRef)(null);return a.current||(a.current=document.createElement("div")),Object(n.useEffect)((function(){return Ee.appendChild(a.current),function(){Ee.removeChild(a.current)}}),[]),Object(c.createPortal)(Object(K.jsx)("div",{children:t}),a.current)},_e=function(e){var t=e.label,a=Object(xe.a)(e,["label"]),n=Object(Se.c)(a),r=Object(l.a)(n,2),c=r[0],s=r[1],i=s.error&&s.touched?s.error:"";return Object(K.jsx)(ye.a,Object(b.a)(Object(b.a)({label:t},c),{},{helperText:i,error:!!i}))},we=function(e){var t=e.label,a=e.options,n=Object(xe.a)(e,["label","options"]),r=Object(Se.c)(n),c=Object(l.a)(r,2),s=c[0],i=c[1],o=i.error&&i.touched?i.error:"";return Object(K.jsx)(ye.a,Object(b.a)(Object(b.a)({select:!0,label:t},s),{},{helperText:o,error:!!o,children:a.map((function(e){return Object(K.jsx)(ge.a,{value:e.value,children:e.label},e.value)}))}))},Ne=Te.b({category:Te.c().required().max(30),habitName:Te.c().required().max(30),types:Te.c().required(),color:Te.c().required()}),De=function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={category:t.category,habitName:t.habitName,inputType:t.types,color:t.color},console.log("in save habit"),e.next=4,D.saveHabit(a);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=Object(L.a)({root:{minWidth:275,padding:20},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),Ae=[{value:"checkbox",label:"Check Box"},{value:"text",label:"Text"},{value:"number",label:"Number"}],Re=[{value:"General",label:"General"},{value:"Health/Nutrition",label:"Health/Nutrition"},{value:"Skills",label:"Skills"},{value:"Work/Study",label:"Work/Study"},{value:"House Hold",label:"House Hold"},{value:"Quit Habit",label:"Quit Habit"}],Ce=[{value:"red",label:"Red"},{value:"blue",label:"Blue"},{value:"black",label:"Black"},{value:"green",label:"Green"}],He=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=(t[0],t[1]),r=Ie(),c=Object(n.useState)(null),s=Object(l.a)(c,2),i=s[0],u=s[1],b=Object(o.g)(),j=Object(n.useState)(!1),d=Object(l.a)(j,2),O=d[0],x=d[1],m=Object(n.useState)(!1),f=Object(l.a)(m,2),v=f[0],y=f[1];Object(n.useEffect)((function(){O&&!v&&b.push("/")}),[O,b,v]);var g=function(){y(!v),x(!0)};return Object(K.jsxs)(me.a,{raised:!0,className:r.root,children:[Object(K.jsx)(fe.a,{title:"Add New Habit"}),Object(K.jsx)(ve.a,{children:Object(K.jsx)(Se.b,{initialValues:{category:"General",habitName:"",types:"checkbox",color:"black"},onSubmit:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t),a(t),e.next=5,De(t);case 5:(n=e.sent)&&(u(n.msg),g()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),400===e.t0.response.status&&(console.log(e.t0.response),u(e.t0.response.data.error),g());case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:Ne,children:function(e){var t=e.values,a=e.handleSubmit;e.handleChange,e.handleBlur;return Object(K.jsxs)("form",{onSubmit:a,children:[Object(K.jsx)("div",{className:r.root,children:Object(K.jsx)(we,{value:t.category,select:!0,label:"Category",name:"category",options:Re})}),Object(K.jsx)("div",{className:r.root,children:Object(K.jsx)(_e,{label:"Habit Name",name:"habitName",type:"input"})}),Object(K.jsx)("div",{className:r.root,children:Object(K.jsx)(we,{value:t.types,select:!0,label:"Types",name:"types",options:Ae})}),Object(K.jsx)("div",{className:r.root,children:Object(K.jsx)(we,{value:t.color,select:!0,label:"Color",name:"color",options:Ce})}),Object(K.jsx)("div",{children:Object(K.jsx)(P.a,{variant:"contained",color:"primary",type:"submit",children:"Save Habit"})})]})}})}),v?Object(K.jsx)(ke,{children:Object(K.jsx)(me.a,{raised:!0,children:Object(K.jsxs)(ve.a,{children:[Object(K.jsx)("div",{children:i}),Object(K.jsx)(P.a,{variant:"contained",color:"primary",type:"button",onClick:g,children:"OK"})]})})}):null]})},Ue=a(348);function ze(){return(ze=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.post(y.apiUrl+"signUp",t);case 3:return a=e.sent,e.abrupt("return",Promise.resolve(a));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Ke(){return(Ke=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.post(y.apiUrl+"signIn",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return Be.apply(this,arguments)}function Be(){return(Be=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.removeToken(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fe={signUp:function(e){return ze.apply(this,arguments)},signIn:function(e){return Ke.apply(this,arguments)},signOut:We},Le=Te.b({firstName:Te.c().required().min(3,"First name must have at least 3 character").max(15,"First name must be 15 character or less"),lastName:Te.c().required().min(3,"Last name must have at least 3 character").max(20,"Last name must be 20 character or less"),email:Te.c().required().email("Invalid email address"),password:Te.c().required().min(6,"Must be 6 character or more"),termsOfServices:Te.a().required().oneOf([!0],"You must accept the terms and conditions.")}),Me=function(e){var t=e.label,a=Object(xe.a)(e,["label"]),n=Object(Se.c)(a),r=Object(l.a)(n,2),c=r[0],s=r[1],i=s.error&&s.touched?s.error:"";return Object(K.jsx)(ye.a,Object(b.a)(Object(b.a)({label:t},c),{},{type:a.type,helperText:i,error:!!i}))},Pe=function(e){var t=e.label,a=Object(xe.a)(e,["label"]),n=Object(Se.c)(Object(b.a)(Object(b.a)({},a),{},{type:"checkbox"})),r=Object(l.a)(n,2),c=r[0],s=r[1],i=s.error&&s.touched?s.error:"";return Object(K.jsx)(Ue.a,{label:t,labelPlacement:"end",control:Object(K.jsx)(ne.a,Object(b.a)(Object(b.a)({},c),{},{error:!!i}))})},qe=Object(L.a)({root:{minWidth:275,padding:20},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),Ge=function(){var e=Object(n.useContext)(B),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),s=Object(l.a)(c,2),i=s[0],u=s[1],b=Object(n.useState)(null),j=Object(l.a)(b,2),d=j[0],O=j[1],x=Object(o.g)(),m=qe(),f=function(){u(!i)};return Object(K.jsxs)(me.a,{raised:!0,className:m.root,children:[Object(K.jsx)(fe.a,{title:"SignUp"}),Object(K.jsxs)(ve.a,{children:[Object(K.jsx)(Se.b,{initialValues:{firstName:"",lastName:"",email:"",password:"",termsOfServices:!1},onSubmit:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,c,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.signUp(t);case 3:if(n=e.sent,console.log(n),200!==n.status){e.next=18;break}return c=n.data.token,console.log("token  from response ".concat(c)),T.setToken(c),r({type:"SET_TOKEN",payload:c}),s=T.getUserInfo(y.tokenKey),console.log("user info ".concat(s," ")),r({type:"SET_USER_INFO",payload:s}),r({type:"SET_IS_AUTHENTICATED",payload:!0}),console.log(a),e.abrupt("return",x.push("/form"));case 18:401===n.status?(i=n.data.error,console.log(n),console.log(a),r({type:"SET_ERROR",payload:i})):r({type:"SET_ERROR",payload:"Unknown error"});case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),401===e.t0.response.status&&(O(e.t0.response.data.error),f()),r({type:"SET_ERROR",payload:e.t0});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:Le,children:Object(K.jsxs)(Se.a,{children:[Object(K.jsx)("div",{className:m.root,children:Object(K.jsx)(Me,{label:"First Name",name:"firstName",type:"input"})}),Object(K.jsx)("div",{className:m.root,children:Object(K.jsx)(Me,{label:"Last Name",name:"lastName",type:"input"})}),Object(K.jsx)("div",{className:m.root,children:Object(K.jsx)(Me,{label:"Email",name:"email",type:"input"})}),Object(K.jsx)("div",{className:m.root,children:Object(K.jsx)(Me,{label:"Password",name:"password",type:"password"})}),Object(K.jsx)("div",{className:m.root,children:Object(K.jsx)(Pe,{label:"I accept the terms and condition",name:"termsOfServices"})}),Object(K.jsx)("div",{className:m.root,children:Object(K.jsx)(P.a,{variant:"contained",color:"primary",type:"submit",children:"Sing Me Up"})})]})}),i?Object(K.jsx)(ke,{children:Object(K.jsx)(me.a,{raised:!0,children:Object(K.jsxs)(ve.a,{children:[Object(K.jsx)("div",{style:{margin:"20px"},children:d}),Object(K.jsx)(P.a,{variant:"contained",color:"primary",type:"button",onClick:f,children:"OK"})]})})}):null]})]})},Ye=Te.b({email:Te.c().required().email("Invalid email address"),password:Te.c().required().min(6,"Must be 6 character or more")}),Je=function(e){var t=e.label,a=Object(xe.a)(e,["label"]),n=Object(Se.c)(a),r=Object(l.a)(n,2),c=r[0],s=r[1],i=s.error&&s.touched?s.error:"";return Object(K.jsx)(ye.a,Object(b.a)(Object(b.a)({label:t},c),{},{type:a.type,helperText:i,error:!!i}))},Ve=Object(L.a)({root:{minWidth:275,padding:10,marginTop:20},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),Qe=function(){var e=Ve(),t=Object(o.g)(),a=Object(n.useState)([]),r=Object(l.a)(a,2),c=r[0],s=r[1],i=Object(n.useContext)(B),u=Object(l.a)(i,2),b=u[0],j=u[1],d=Object(n.useState)(!1),O=Object(l.a)(d,2),x=O[0],m=O[1],f=Object(n.useState)(null),v=Object(l.a)(f,2),g=v[0],S=v[1],E=function(){m(!x)};return Object(K.jsxs)(me.a,{raised:!0,className:e.root,children:[Object(K.jsx)("div",{children:c.length?Object(K.jsx)("h3",{children:c[0]}):null}),Object(K.jsx)(fe.a,{title:"SignIn"}),Object(K.jsxs)(ve.a,{children:[Object(K.jsx)(Se.b,{initialValues:{password:"",email:""},onSubmit:function(){var e=Object(h.a)(p.a.mark((function e(a){var n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s([]),console.log(c),e.prev=2,e.next=5,Fe.signIn(a);case 5:if(n=e.sent,console.log(n),200!==n.status){e.next=17;break}return r=n.data.token,T.setToken(r),j({type:"SET_TOKEN",payload:r}),i=T.getUserInfo(y.tokenKey),console.log("user info ".concat(i," ")),j({type:"SET_USER_INFO",payload:i}),j({type:"SET_IS_AUTHENTICATED",payload:!0}),console.log(b),e.abrupt("return",t.push("/"));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),console.log(e.t0.response),401===e.t0.response.status&&(console.log(e.t0.data),S(e.t0.response.data.error),E());case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:Ye,children:Object(K.jsxs)(Se.a,{children:[Object(K.jsx)("div",{className:e.root,children:Object(K.jsx)(Je,{label:"Email",name:"email",type:"input"})}),Object(K.jsx)("div",{className:e.root,children:Object(K.jsx)(Je,{label:"Password",name:"password",type:"password"})}),Object(K.jsx)("div",{className:e.root,children:Object(K.jsx)(P.a,{variant:"contained",color:"primary",type:"submit",children:"SingIn"})})]})}),x?Object(K.jsx)(ke,{children:Object(K.jsx)(me.a,{raised:!0,children:Object(K.jsxs)(ve.a,{children:[Object(K.jsx)("div",{style:{margin:"20px"},children:g}),Object(K.jsx)(P.a,{variant:"contained",color:"primary",type:"button",onClick:E,children:"OK"})]})})}):null]})]})},$e=function(){var e=Object(n.useContext)(B),t=Object(l.a)(e,1)[0];return Object(K.jsx)(r.a.Fragment,{children:Object(K.jsx)("nav",{children:localStorage.getItem(y.tokenKey)?Object(K.jsxs)(r.a.Fragment,{children:[Object(K.jsx)(i.c,{style:{textDecoration:"none",padding:"15px",color:"darkgrey",fontSize:"4vw"},activeStyle:{color:"black",fontSize:"4vw"},to:"/",exact:!0,children:"Home"}),Object(K.jsx)(i.c,{style:{textDecoration:"none",padding:"15px",color:"darkgrey",fontSize:"4vw"},activeStyle:{color:"black",fontSize:"4vw"},to:"/form",children:"Add Habit"}),Object(K.jsx)(i.c,{style:{textDecoration:"none",padding:"15px",color:"darkgrey",fontSize:"4vw"},activeStyle:{color:"black",fontSize:"4vw"},to:"/signOut",children:"SignOut"}),Object(K.jsxs)("h2",{children:["Hello, ".concat(t.userInfo.firstName)," "]})]}):Object(K.jsxs)(r.a.Fragment,{children:[" ",Object(K.jsx)(i.c,{style:{textDecoration:"none",padding:"15px",color:"darkgrey",fontSize:"4vw"},activeStyle:{color:"black",fontSize:"4vw"},to:"/signUp",children:"SignUp"}),Object(K.jsx)(i.c,{style:{textDecoration:"none",padding:"15px",color:"darkgrey",fontSize:"4vw"},activeStyle:{color:"black",fontSize:"4vw"},to:"/signIn",children:"SignIn"})," "]})})})},Xe=function(){var e=Object(o.g)(),t=Object(n.useContext)(B),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),u=i[0],b=i[1],j=Object(n.useState)(null),d=Object(l.a)(j,2);d[0],d[1];return Object(n.useEffect)((function(){c({type:"SET_TOKEN",payload:""}),c({type:"SET_IS_AUTHENTICATED",payload:!1}),c({type:"SET_USER_INFO",payload:{}}),We(y.tokenKey),r.isAuthenticated||b(!0);var t=setTimeout((function(){e.push("/signIn")}),1e3);return function(){clearTimeout(t)}}),[c,e,r.isAuthenticated]),Object(K.jsx)("div",{children:u?Object(K.jsx)(ke,{children:Object(K.jsx)(me.a,{raised:!0,children:Object(K.jsxs)(ve.a,{children:[Object(K.jsx)("div",{style:{margin:"20px"},children:"Your are Signed Out"}),Object(K.jsx)(P.a,{variant:"contained",color:"primary",type:"button",onClick:function(){b(!u)},children:"OK"})]})})}):null})},Ze=function(e){e.path;var t=e.component,a=e.render,n=Object(xe.a)(e,["path","component","render"]);return Object(K.jsx)(o.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){return localStorage.getItem(y.tokenKey)?t?Object(K.jsx)(t,Object(b.a)({},e)):a(e):Object(K.jsx)(o.a,{to:{pathname:"/SignIn",state:{form:e.location}}})}}))};console.log("*************** In App");var et=function(){return Object(K.jsx)(r.a.Fragment,{children:Object(K.jsx)(i.b,{basename:"/",children:Object(K.jsxs)(F,{children:[Object(K.jsx)($e,{}),Object(K.jsx)("main",{className:"container-sm",children:Object(K.jsxs)(o.d,{children:[Object(K.jsx)(Ze,{exact:!0,path:"/",component:pe}),Object(K.jsx)(Ze,{path:"/addHabit",component:he}),Object(K.jsx)(Ze,{path:"/form",component:He}),Object(K.jsx)(o.b,{path:"/signUp",component:Ge}),Object(K.jsx)(o.b,{path:"/signIn",component:Qe}),Object(K.jsx)(Ze,{path:"/signOut",component:Xe})]})})]})})})},tt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,354)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};console.log("************* In Index.js"),s.a.render(Object(K.jsx)(i.a,{children:Object(K.jsx)(et,{})}),document.getElementById("root")),tt()}},[[294,1,2]]]);
//# sourceMappingURL=main.c121d53b.chunk.js.map